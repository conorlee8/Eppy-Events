/**
 * Curated event images based on category and keywords
 * Multiple images per keyword for variety - uses hash-based selection for uniqueness
 */

export const EVENT_IMAGES = {
  music: {
    jazz: [
      'https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?w=800&q=80',
      'https://images.unsplash.com/photo-1511192336575-5a79af67a629?w=800&q=80',
      'https://images.unsplash.com/photo-1420161900862-9a86fa1f5c79?w=800&q=80'
    ],
    blues: [
      'https://images.unsplash.com/photo-1510915228340-29c85a43dcfe?w=800&q=80',
      'https://images.unsplash.com/photo-1526142684086-7ebd69df27a5?w=800&q=80'
    ],
    classical: [
      'https://images.unsplash.com/photo-1519683384663-89d1a085f9f4?w=800&q=80',
      'https://images.unsplash.com/photo-1507838153414-b4b713384a76?w=800&q=80',
      'https://images.unsplash.com/photo-1465847899084-d164df4dedc6?w=800&q=80'
    ],
    orchestra: [
      'https://images.unsplash.com/photo-1465847899084-d164df4dedc6?w=800&q=80',
      'https://images.unsplash.com/photo-1519139270028-ab664cf42264?w=800&q=80'
    ],
    rock: [
      'https://images.unsplash.com/photo-1498038432885-c6f3f1b912ee?w=800&q=80',
      'https://images.unsplash.com/photo-1501612780327-45045538702b?w=800&q=80',
      'https://images.unsplash.com/photo-1524368535928-5b5e00ddc76b?w=800&q=80'
    ],
    country: [
      'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80',
      'https://images.unsplash.com/photo-1510915228340-29c85a43dcfe?w=800&q=80'
    ],
    electronic: [
      'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&q=80',
      'https://images.unsplash.com/photo-1571330735066-03aaa9429d89?w=800&q=80',
      'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80'
    ],
    dj: [
      'https://images.unsplash.com/photo-1571330735066-03aaa9429d89?w=800&q=80',
      'https://images.unsplash.com/photo-1598387181032-a3103a2db5b1?w=800&q=80',
      'https://images.unsplash.com/photo-1574306671832-65f7262fe0a8?w=800&q=80'
    ],
    hiphop: [
      'https://images.unsplash.com/photo-1571609631306-7dc0447e9b8b?w=800&q=80',
      'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&q=80'
    ],
    rap: [
      'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&q=80',
      'https://images.unsplash.com/photo-1571609631306-7dc0447e9b8b?w=800&q=80'
    ],
    indie: [
      'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=800&q=80',
      'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&q=80',
      'https://images.unsplash.com/photo-1524368535928-5b5e00ddc76b?w=800&q=80'
    ],
    acoustic: [
      'https://images.unsplash.com/photo-1510915361894-db8b60106cb1?w=800&q=80',
      'https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800&q=80',
      'https://images.unsplash.com/photo-1516924962500-2b4b3b99ea02?w=800&q=80'
    ],
    concert: [
      'https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=800&q=80',
      'https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=800&q=80',
      'https://images.unsplash.com/photo-1429962714451-bb934ecdc4ec?w=800&q=80'
    ],
    festival: [
      'https://images.unsplash.com/photo-1514525253161-7a46d19cd819?w=800&q=80',
      'https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?w=800&q=80',
      'https://images.unsplash.com/photo-1506157786151-b8491531f063?w=800&q=80'
    ],
    default: [
      'https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=800&q=80',
      'https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=800&q=80',
      'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=800&q=80'
    ]
  },
  food: {
    wine: [
      'https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=800&q=80',
      'https://images.unsplash.com/photo-1547595628-c61a29f496f0?w=800&q=80',
      'https://images.unsplash.com/photo-1569529465841-dfecdab7503b?w=800&q=80'
    ],
    beer: [
      'https://images.unsplash.com/photo-1535958636474-b021ee887b13?w=800&q=80',
      'https://images.unsplash.com/photo-1608270586620-248524c67de9?w=800&q=80'
    ],
    cocktail: [
      'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=800&q=80',
      'https://images.unsplash.com/photo-1470337458703-46ad1756a187?w=800&q=80',
      'https://images.unsplash.com/photo-1536935338788-846bb9981813?w=800&q=80'
    ],
    streetfood: [
      'https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&q=80',
      'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&q=80'
    ],
    foodtruck: [
      'https://images.unsplash.com/photo-1565123409695-7b5ef63a2efb?w=800&q=80',
      'https://images.unsplash.com/photo-1513639776629-7b61b0ac49cb?w=800&q=80'
    ],
    finedining: [
      'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&q=80',
      'https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?w=800&q=80'
    ],
    brunch: [
      'https://images.unsplash.com/photo-1484723091739-30a097e8f929?w=800&q=80',
      'https://images.unsplash.com/photo-1533777857889-4be7c70b33f7?w=800&q=80'
    ],
    dessert: [
      'https://images.unsplash.com/photo-1488477181946-6428a0291777?w=800&q=80',
      'https://images.unsplash.com/photo-1551024506-0bccd828d307?w=800&q=80',
      'https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=800&q=80'
    ],
    tasting: [
      'https://images.unsplash.com/photo-1510627489930-0c1b0bfb6785?w=800&q=80',
      'https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=800&q=80'
    ],
    cooking: [
      'https://images.unsplash.com/photo-1556910103-1c02745aae4d?w=800&q=80',
      'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&q=80'
    ],
    default: [
      'https://images.unsplash.com/photo-1555244162-803834f70033?w=800&q=80',
      'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&q=80'
    ]
  },
  sports: {
    basketball: [
      'https://images.unsplash.com/photo-1546519638-68e109498ffc?w=800&q=80',
      'https://images.unsplash.com/photo-1608245449230-4ac19066d2d0?w=800&q=80'
    ],
    soccer: [
      'https://images.unsplash.com/photo-1489944440615-453fc2b6a9a9?w=800&q=80',
      'https://images.unsplash.com/photo-1579952363873-27f3bade9f55?w=800&q=80'
    ],
    football: [
      'https://images.unsplash.com/photo-1508098682722-e99c43a406b2?w=800&q=80',
      'https://images.unsplash.com/photo-1566577739112-5180d4bf9390?w=800&q=80'
    ],
    baseball: [
      'https://images.unsplash.com/photo-1566577739112-5180d4bf9390?w=800&q=80',
      'https://images.unsplash.com/photo-1519861155730-0b5fbf0dd889?w=800&q=80'
    ],
    running: [
      'https://images.unsplash.com/photo-1461896836934-ffe607ba8211?w=800&q=80',
      'https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=800&q=80',
      'https://images.unsplash.com/photo-1452626038306-9aae5e071dd3?w=800&q=80'
    ],
    marathon: [
      'https://images.unsplash.com/photo-1452626038306-9aae5e071dd3?w=800&q=80',
      'https://images.unsplash.com/photo-1532444458054-01a7dd3e9fca?w=800&q=80'
    ],
    yoga: [
      'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=800&q=80',
      'https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=800&q=80',
      'https://images.unsplash.com/photo-1599447421416-3414500c18a5?w=800&q=80',
      'https://images.unsplash.com/photo-1588286840104-8957b019727f?w=800&q=80'
    ],
    fitness: [
      'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=800&q=80',
      'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&q=80',
      'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=800&q=80'
    ],
    cycling: [
      'https://images.unsplash.com/photo-1517649763962-0c623066013b?w=800&q=80',
      'https://images.unsplash.com/photo-1571188654248-7a89213915f7?w=800&q=80'
    ],
    tennis: [
      'https://images.unsplash.com/photo-1554068865-24cecd4e34b8?w=800&q=80',
      'https://images.unsplash.com/photo-1622163642998-1ea32b0bbc67?w=800&q=80'
    ],
    default: [
      'https://images.unsplash.com/photo-1461896836934-ffe607ba8211?w=800&q=80',
      'https://images.unsplash.com/photo-1517838277536-f5f99be501cd?w=800&q=80'
    ]
  },
  arts: {
    gallery: [
      'https://images.unsplash.com/photo-1513364776144-60967b0f800f?w=800&q=80',
      'https://images.unsplash.com/photo-1577083552431-6e5fd01988ec?w=800&q=80'
    ],
    museum: [
      'https://images.unsplash.com/photo-1554907984-15263bfd63bd?w=800&q=80',
      'https://images.unsplash.com/photo-1566127444979-b3d2b654e3a5?w=800&q=80'
    ],
    theater: [
      'https://images.unsplash.com/photo-1503095396549-807759245b35?w=800&q=80',
      'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&q=80',
      'https://images.unsplash.com/photo-1478720568477-152d9b164e26?w=800&q=80'
    ],
    dance: [
      'https://images.unsplash.com/photo-1508700929628-666bc8bd84ea?w=800&q=80',
      'https://images.unsplash.com/photo-1545224144-b38cd309ef69?w=800&q=80',
      'https://images.unsplash.com/photo-1518611012118-696072aa579a?w=800&q=80'
    ],
    ballet: [
      'https://images.unsplash.com/photo-1518611012118-696072aa579a?w=800&q=80',
      'https://images.unsplash.com/photo-1508700929628-666bc8bd84ea?w=800&q=80'
    ],
    painting: [
      'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?w=800&q=80',
      'https://images.unsplash.com/photo-1579783902614-a3fb3927b6a5?w=800&q=80'
    ],
    sculpture: [
      'https://images.unsplash.com/photo-1561214115-f2f134cc4912?w=800&q=80',
      'https://images.unsplash.com/photo-1578926219240-b7b6c13e0e67?w=800&q=80'
    ],
    photography: [
      'https://images.unsplash.com/photo-1542038784456-1ea8e935640e?w=800&q=80',
      'https://images.unsplash.com/photo-1452587925148-ce544e77e70d?w=800&q=80'
    ],
    film: [
      'https://images.unsplash.com/photo-1485846234645-a62644f84728?w=800&q=80',
      'https://images.unsplash.com/photo-1478720568477-152d9b164e26?w=800&q=80'
    ],
    comedy: [
      'https://images.unsplash.com/photo-1585699324551-f6c309eedeca?w=800&q=80',
      'https://images.unsplash.com/photo-1527224857830-43a7acc85260?w=800&q=80'
    ],
    default: [
      'https://images.unsplash.com/photo-1499781350541-7783f6c6a0c8?w=800&q=80',
      'https://images.unsplash.com/photo-1513364776144-60967b0f800f?w=800&q=80'
    ]
  },
  technology: {
    conference: [
      'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&q=80',
      'https://images.unsplash.com/photo-1591115765373-5207764f72e7?w=800&q=80'
    ],
    hackathon: [
      'https://images.unsplash.com/photo-1504384308090-c894fdcc538d?w=800&q=80',
      'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=800&q=80'
    ],
    startup: [
      'https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=800&q=80',
      'https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&q=80'
    ],
    workshop: [
      'https://images.unsplash.com/photo-1531482615713-2afd69097998?w=800&q=80',
      'https://images.unsplash.com/photo-1524178232363-1fb2b075b655?w=800&q=80'
    ],
    coding: [
      'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=800&q=80',
      'https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=800&q=80'
    ],
    ai: [
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=800&q=80',
      'https://images.unsplash.com/photo-1620712943543-bcc4688e7485?w=800&q=80'
    ],
    vr: [
      'https://images.unsplash.com/photo-1622979135225-d2ba269cf1ac?w=800&q=80',
      'https://images.unsplash.com/photo-1617802690992-15d93263d3a9?w=800&q=80'
    ],
    networking: [
      'https://images.unsplash.com/photo-1511578314322-379afb476865?w=800&q=80',
      'https://images.unsplash.com/photo-1556761175-5973dc0f32e7?w=800&q=80'
    ],
    default: [
      'https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800&q=80',
      'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&q=80'
    ]
  },
  community: {
    meetup: [
      'https://images.unsplash.com/photo-1511578314322-379afb476865?w=800&q=80',
      'https://images.unsplash.com/photo-1556761175-5973dc0f32e7?w=800&q=80',
      'https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=800&q=80'
    ],
    volunteer: [
      'https://images.unsplash.com/photo-1559027615-cd4628902d4a?w=800&q=80',
      'https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?w=800&q=80'
    ],
    social: [
      'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=800&q=80',
      'https://images.unsplash.com/photo-1543007630-9710e4a00a20?w=800&q=80'
    ],
    default: [
      'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=800&q=80',
      'https://images.unsplash.com/photo-1556761175-5973dc0f32e7?w=800&q=80'
    ]
  }
} as const

const KEYWORD_MAP: Record<string, string[]> = {
  jazz: ['jazz', 'bebop', 'swing'],
  blues: ['blues', 'soul', 'r&b'],
  classical: ['classical', 'symphony', 'philharmonic', 'chamber'],
  orchestra: ['orchestra', 'philharmonic'],
  rock: ['rock', 'metal', 'punk', 'grunge'],
  country: ['country', 'bluegrass', 'folk'],
  electronic: ['electronic', 'edm', 'techno', 'house', 'trance'],
  dj: ['dj', 'deejay'],
  hiphop: ['hip hop', 'hiphop', 'hip-hop'],
  rap: ['rap', 'rapper'],
  indie: ['indie', 'alternative'],
  acoustic: ['acoustic', 'unplugged'],
  concert: ['concert', 'live', 'show'],
  festival: ['festival', 'fest'],
  wine: ['wine', 'vineyard', 'sommelier', 'cabernet', 'pinot'],
  beer: ['beer', 'brewery', 'craft beer', 'ipa', 'ale', 'lager'],
  cocktail: ['cocktail', 'mixology', 'bartender'],
  streetfood: ['street food'],
  foodtruck: ['food truck', 'truck'],
  finedining: ['fine dining', 'michelin', 'tasting menu'],
  brunch: ['brunch', 'breakfast'],
  dessert: ['dessert', 'pastry', 'bakery', 'sweet'],
  tasting: ['tasting', 'wine tasting', 'beer tasting'],
  cooking: ['cooking', 'culinary', 'chef'],
  basketball: ['basketball', 'nba', 'hoops'],
  soccer: ['soccer', 'futbol'],
  football: ['football', 'nfl'],
  baseball: ['baseball', 'mlb'],
  running: ['running', '5k', '10k', 'run'],
  marathon: ['marathon', 'half marathon'],
  yoga: ['yoga', 'meditation', 'mindfulness'],
  fitness: ['fitness', 'workout', 'gym', 'training', 'crossfit', 'bootcamp'],
  cycling: ['cycling', 'bike', 'bicycle'],
  tennis: ['tennis'],
  gallery: ['gallery', 'art show', 'exhibition'],
  museum: ['museum'],
  theater: ['theater', 'theatre', 'play', 'broadway'],
  dance: ['dance', 'dancing'],
  ballet: ['ballet'],
  painting: ['painting', 'paint'],
  sculpture: ['sculpture', 'sculptor'],
  photography: ['photography', 'photo'],
  film: ['film', 'movie', 'cinema', 'screening'],
  comedy: ['comedy', 'comedian', 'stand-up', 'standup'],
  conference: ['conference', 'summit', 'expo'],
  hackathon: ['hackathon', 'hack'],
  startup: ['startup', 'entrepreneur'],
  workshop: ['workshop', 'seminar'],
  coding: ['coding', 'programming', 'developer'],
  ai: ['ai', 'artificial intelligence', 'machine learning', 'ml'],
  vr: ['vr', 'virtual reality', 'ar', 'augmented reality'],
  networking: ['networking', 'meetup', 'network'],
  meetup: ['meetup', 'meet up', 'gathering'],
  volunteer: ['volunteer', 'charity', 'community service'],
  social: ['social', 'party', 'happy hour']
}

/**
 * Simple hash function to convert string to number
 */
function hashString(str: string): number {
  let hash = 0
  for (let i = 0; i < str.length; i++) {
    const char = str.charCodeAt(i)
    hash = ((hash << 5) - hash) + char
    hash = hash & hash // Convert to 32bit integer
  }
  return Math.abs(hash)
}

export function getEventImage(event: { id?: string; title: string; category: string; imageUrl?: string }): string {
  // Use existing image if available
  if (event.imageUrl) {
    return event.imageUrl
  }

  const title = event.title.toLowerCase()
  const category = event.category.toLowerCase()
  const eventId = event.id || title // Use ID or title as fallback

  // Check for keyword matches
  for (const [type, keywords] of Object.entries(KEYWORD_MAP)) {
    if (keywords.some(keyword => title.includes(keyword))) {
      const categoryImages = EVENT_IMAGES[category as keyof typeof EVENT_IMAGES]
      if (categoryImages && type in categoryImages) {
        const imageArray = categoryImages[type as keyof typeof categoryImages]

        // If it's an array, use hash to pick one
        if (Array.isArray(imageArray)) {
          const hash = hashString(eventId)
          const index = hash % imageArray.length
          return imageArray[index]
        }
        return imageArray as string
      }
    }
  }

  // Fall back to category default
  const categoryImages = EVENT_IMAGES[category as keyof typeof EVENT_IMAGES]
  if (categoryImages?.default) {
    const defaultImages = categoryImages.default
    if (Array.isArray(defaultImages)) {
      const hash = hashString(eventId)
      const index = hash % defaultImages.length
      return defaultImages[index]
    }
    return defaultImages as string
  }

  // Ultimate fallback
  const fallbackImages = EVENT_IMAGES.music.default
  const hash = hashString(eventId)
  const index = hash % fallbackImages.length
  return fallbackImages[index]
}
